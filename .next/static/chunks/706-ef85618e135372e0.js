(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{7982:function(e){e.exports={formInput:"style_formInput__Nijrn",SubmitGroupButton:"style_SubmitGroupButton__oI9gm",inputSignup:"style_inputSignup__MEBxE",navigasi:"style_navigasi__RRIOR",footer:"style_footer__RH9rY",logoutText:"style_logoutText___5Hm1"}},1528:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});var i=t(1278),n=t(6006);function s(e){let{toastNotif:a}=e,t=(0,i.p)(),s=[a.status];(0,n.useEffect)(()=>{s.map((e,i)=>{t({title:"".concat(a.teks),status:e,isClosable:!0,duration:2500})})},[])}},8934:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ed},localhost_port:function(){return ec}});var i=t(9268),n=t(6006),s=t(6931),r=t(3845),l=t(1476),o=t(5161),c=t(9414),d=t(7886),h=t(6626),u=t(9109),m=t(2890),x=t(7668),j=t(2197),p=t(3977),g=t(2103),f=t(6470),k=t(5953),v=t(3560),_=t(5129),y=t(9764),S=t(7982),w=t.n(S),b=t(5846),C=t.n(b),z=t(21),Z=t(4214);function T(e){let{getUser:a}=e;return(0,i.jsx)(s.aV,{spacing:2,children:(0,i.jsxs)(s.HC,{children:[(0,i.jsx)(s.DE,{as:z.HEw,color:"red.500"}),(0,i.jsx)(r.r,{onClick:a,children:(0,i.jsx)("span",{style:{fontSize:"1rem",fontWeight:"normal"},children:"Get Users "})})]})})}function E(e){let{token:a,name:t,getUsers:s}=e,[S,b]=(0,n.useState)(""),[E,I]=(0,n.useState)(!0),{isOpen:q,onOpen:H,onClose:N}=(0,l.q)(),P=()=>{b("xs"),H()};async function A(){if(!confirm("Yakin untuk keluar ?"))return!1;await Z.Z.delete("".concat(ec,"/logout"),{withCredentials:!0}),location.href="/"}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.d,{onClose:N,isOpen:q,size:S,children:[(0,i.jsx)(c.Z,{}),(0,i.jsxs)(d.s,{children:[(0,i.jsx)(h.o,{}),(0,i.jsxs)(u.f,{children:[(0,i.jsxs)(m.K,{direction:"row",spacing:4,align:"center",margin:"4px 0",children:[(0,i.jsx)(x.x,{color:"#e91e3e",fontSize:"16px",fontWeight:"bold",children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{style:{color:"#222"},children:[(0,i.jsx)(j.J,{as:z._K$,color:"red.500"})," Hello"]}),", ",t.split(" ")[0]]}):""}),a?"":(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C(),{href:"/signup",rel:"preload",children:(0,i.jsx)(p.z,{variant:"link",color:"#e53e3e",onClick:()=>I(!0),children:" Register "})}),(0,i.jsx)(C(),{href:"/login",children:(0,i.jsx)(p.z,{variant:"link",color:"#e53e3e",children:"Login"})})," "]})]}),(0,i.jsx)("div",{style:{margin:"1rem 0px"},children:(0,i.jsx)(T,{getUser:s})}),a&&(0,i.jsx)("div",{className:w().logoutText,children:(0,i.jsxs)(r.r,{children:[(0,i.jsx)(p.z,{fontSize:"md",fontWeight:"semibold",onClick:A,variant:"ghost",children:"Logout"})," "]})})]})]})]}),(0,i.jsx)("div",{id:"navigasiHeader",children:(0,i.jsx)("div",{className:w().navigasi,children:(0,i.jsxs)(g.k,{minWidth:"max-content",alignItems:"center",gap:"2",children:[(0,i.jsx)(f.xu,{p:"2",children:(0,i.jsxs)(g.k,{alignItems:"center",gap:"2",children:[(0,i.jsx)(k.E,{borderRadius:"full",boxSize:"48px",src:"https://res.cloudinary.com/djsizjaee/image/upload/v1683010530/samples/erlangga/IMG_2230_ulbomc.jpg",alt:"Erlangga Hidayatullah"}),(0,i.jsx)(x.x,{color:"#e91e3e",fontSize:"16px",fontWeight:"bold",children:"Portof.Me"})]})}),(0,i.jsx)(v.L,{}),(0,i.jsxs)(_.X,{textAlign:"center",margin:"1rem",as:"h2",size:"lg",children:["Welcome ",t&&"back,",(0,i.jsxs)("span",{style:{color:"#e53e3e"},children:[" ",t.split(" ")[0]]})]}),(0,i.jsx)(v.L,{}),(0,i.jsx)(f.xu,{gap:"2",children:(0,i.jsx)(y.h,{gap:"0",children:(0,i.jsx)(p.z,{onClick:()=>P(S),m:1,variant:"ghost",children:"Menu"},S)})})]})})})]})}var I=t(1528),q=t(9477),H=t(5118),N=t(2178),P=t(6516),A=t(1888),F=t(738),R=t(5468),D=t(9576),W=t(1594),O=t(6699),B=t(2132),K=t(5368),L=t(3998),M=t(5549),U=t(1822),V=t(3941),G=t(686),J=t(8852),Y=t(353),Q=t(7644),X=t.n(Q),$=t(2215);let{createContext:ee}=t(6006),ea=ee();function et(e){let{editProfile:a,setEditProfile:t,decodedJwt:s}=e,{isOpen:r,onOpen:o,onClose:d}=(0,l.q)(),m=(0,n.useContext)(ea),x=function(e){let a=(0,J.TA)({initialValues:{nama:"",email:""},validationSchema:Y.Ry({nama:Y.Z_().max(20,"maksimal 20 karakter").min(5,"minimal 5 karakter").required("nama harus di isi"),email:Y.Z_().email("email tidak valid").required("email harus di isi").test("is-valid",e=>"".concat(e.path," is invalid"),e=>e?X()(e,{allow_display_name:!0,require_tld:!0}):new yup.ValidationError("Invalid value"))}),onSubmit:(a,t)=>{let{resetForm:i}=t;i();let n=(0,Z.Z)("".concat(ec,"/update"),{headers:{ContentType:"application/json"},withCredentials:!0,data:{nama:a.nama,email:a.email},method:"put"});n||alert("gagal update profile"),n&&e.getUsers(),e.refreshToken()}});return a}(m);return(0,n.useEffect)(()=>{a&&o()},[a]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(B.u_,{isOpen:r,onClose:d,children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)("form",{onSubmit:x.handleSubmit,children:(0,i.jsxs)(K.h,{children:[(0,i.jsx)(L.x,{children:"Ubah Profile"}),(0,i.jsx)(h.o,{onClick:()=>t(!1)}),(0,i.jsxs)(u.f,{pb:6,children:[(0,i.jsxs)(M.NI,{children:[(0,i.jsx)(U.l,{children:"Nama Lengkap"}),(0,i.jsx)(V.I,{name:"nama",placeholder:s.nama,onChange:x.handleChange,value:x.values.nama}),(0,i.jsx)($.y,{props:x.errors.nama})]}),(0,i.jsxs)(M.NI,{mt:4,children:[(0,i.jsx)(U.l,{children:"Email"}),(0,i.jsx)(V.I,{name:"email",placeholder:s.email,onChange:x.handleChange,value:x.values.email}),(0,i.jsx)($.y,{props:x.errors.email})]})]}),(0,i.jsxs)(G.m,{children:[(0,i.jsx)(p.z,{colorScheme:"blue",mr:3,type:"submit",children:"Simpan"}),(0,i.jsx)(p.z,{onClick:()=>void(d(),t(!1)),children:"Kembali"})]})]})})]})})}async function ei(e){try{confirm("Yakin menghapus akun ?")&&(await Z.Z.delete("".concat(ec,"/delete"),{data:{email:e},withCredentials:!0}),location.href="/login")}catch(e){console.log({errorCatch:e})}}function en(e){let{data:a,decodedJwt:t}=e,[s,r]=(0,H.k)(""),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(et,{editProfile:l,setEditProfile:o,decodedJwt:t}),(0,i.jsx)("div",{style:{textAlign:"center",margin:"auto",display:"flex",justifyContent:"center",margin:"3rem 0 1rem 0"},children:a?(0,i.jsx)(N.x,{maxWidth:"100%",textAlign:"center",children:(0,i.jsxs)(P.i,{variant:"simple",children:[(0,i.jsxs)(A.R,{children:["Database Kami",(0,i.jsxs)(p.z,{colorScheme:"red",variant:"ghost",onClick:r.toggle,margin:"5px",children:[" ",s?"Show":"Hide"," "]})]}),(0,i.jsx)(F.h,{children:(0,i.jsxs)(R.Tr,{children:[(0,i.jsx)(D.Th,{width:"15%",children:"ID"}),(0,i.jsx)(D.Th,{children:"Nama"}),(0,i.jsx)(D.Th,{children:"Email"})]})}),(0,i.jsx)(W.p,{style:{display:s?"none":""},children:a&&a.map((e,a)=>(0,i.jsxs)(R.Tr,{children:[(0,i.jsx)(O.Td,{children:a+1}),(0,i.jsx)(O.Td,{children:e.nama}),(0,i.jsx)(O.Td,{children:e.email}),(0,i.jsxs)(O.Td,{children:[(0,i.jsx)(p.z,{colorScheme:"red",variant:"ghost",onClick:()=>o(!l),isDisabled:e.nama!==t.nama,children:"Edit"}),(0,i.jsx)(p.z,{colorScheme:"red",variant:"ghost",onClick:()=>ei(t.email),isDisabled:e.nama!==t.nama,children:"Hapus"})]})]},a))})]})}):""})]})}var es=t(9298),er=t(5582),el=t(8131);function eo(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(el.O,{startColor:"red.500",endColor:"orange.500",height:"20px"})})}let ec="https://users-admin-bk-vercel.vercel.app";function ed(){let[e,a]=(0,n.useState)(""),[t,s]=(0,n.useState)(""),[r,l]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[x,j]=(0,n.useState)({teks:"",status:"success",active:""});(0,n.useEffect)(()=>{p(),e&&j({teks:"selamat datang kembali "+"".concat(e),status:"success",active:!0})},[e]);let p=async()=>{try{let e=await Z.Z.get("".concat(ec,"/token"),{withCredentials:!0});s(e.data.accesstoken);let t=(0,q.Z)(e.data.accesstoken);a(t.nama),l(t.exp),c(t)}catch(e){e.response&&j({teks:"anda belum masuk, silahkan login",status:"info",active:!0})}},g=Z.Z.create();async function f(){m(!0);try{let e=await g.get("".concat(ec,"/users"),{headers:{Authorization:"Bearer ".concat(t)}});h(e.data),m(!1)}catch(e){alert("tidak dapat melihat database kami, silahkan login")}}return g.interceptors.request.use(async e=>{let t=new Date;if(1e3*r<t.getTime()){let t=await Z.Z.get("".concat(ec,"/token"),{withCredentials:!0});e.headers.Authorization="Bearer ".concat(t.data.accesstoken),s(t.data.accesstoken);let i=(0,q.Z)(t.data.accesstoken);a(i.nama),l(i.exp)}return e},e=>Promise.reject(e)),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(ea.Provider,{value:{getUsers:f,refreshToken:p},children:[x.active?(0,i.jsx)(I.Z,{toastNotif:x}):"",u&&(0,i.jsx)(eo,{}),(0,i.jsx)(E,{token:t,name:e,getUsers:f}),!t&&(0,i.jsx)("div",{style:{padding:"1rem"},children:(0,i.jsxs)(es.b,{status:"warning",children:[(0,i.jsx)(er.z,{}),"Silahkan login di\xa0 ",(0,i.jsx)("span",{style:{textDecoration:"underline"},children:" Menu "}),"\xa0untuk melihat database kami"]})}),(0,i.jsx)(en,{data:d,decodedJwt:o})]})})}},2215:function(e,a,t){"use strict";t.d(a,{Q:function(){return m},y:function(){return u}});var i=t(9268),n=t(7668),s=t(8852),r=t(353),l=t(7644),o=t.n(l),c=t(4214),d=t(6006),h=t(8934);let u=e=>{let{props:a}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.x,{color:"#c53030",fontSize:"14px",textAlign:"right",padding:"6px 6px 0 6px",children:a})})},m=()=>{let[e,a]=(0,d.useState)(!1),t=(0,s.TA)({initialValues:{nama:"",email:"",password:"",konfirmasiPassword:""},validationSchema:r.Ry({nama:r.Z_().max(20,"maksimal 20 karakter").min(5,"minimal 5 karakter").required("nama harus di isi"),email:r.Z_().email("email tidak valid").required("email harus di isi").test("is-valid",e=>"".concat(e.path," is invalid"),e=>e?o()(e,{allow_display_name:!0,require_tld:!0}):new yup.ValidationError("Invalid value")),password:r.Z_().min(8,"password minimal 8 karakter").required("password harus di isi").matches(/[a-zA-Z]/,"Kata sandi hanya boleh berisi huruf latin"),konfirmasiPassword:r.Z_().oneOf([r.iH("password"),null],"konfirmasi password tidak cocok")}),onSubmit:e=>{let{nama:i,email:n,password:s,konfirmasiPassword:r}=e;(0,c.Z)("".concat(h.localhost_port,"/register"),{method:"POST",data:{nama:i,email:n,password:s,confirmPassword:r}}),a(!0),t.resetForm(),setTimeout(()=>{a(!1),location.href="/login"},1e3)}});return{formik:t,alert:e}}}}]);